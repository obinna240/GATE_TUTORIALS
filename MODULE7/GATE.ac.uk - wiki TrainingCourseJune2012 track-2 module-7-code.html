<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0072)http://gate.ac.uk/wiki/TrainingCourseJune2012/track-2/module-7-code.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>GATE.ac.uk  - wiki/TrainingCourseJune2012/track-2/module-7-code.html</title>
    <script type="text/javascript" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/gate.cow.gwt.NewPage.nocache.js"></script><script defer="defer">gate_cow_gwt_NewPage.onInjectionDone('gate.cow.gwt.NewPage')</script>

    <script type="text/javascript" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/gate.cow.gwt.Upload.nocache.js"></script><script defer="defer">gate_cow_gwt_Upload.onInjectionDone('gate.cow.gwt.Upload')</script>

    <link rel="stylesheet" href="http://gate.ac.uk/css/page.css">
    <link rel="shortcut icon" href="http://gate.ac.uk/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="http://gate.ac.uk/css/prototip/prototip.css">
    
    
      
      
    
    
      <!-- shift the top bar over to miss the left bar -->
      <style type="text/css" media="screen">
      #header .horizontal ul {
        padding-left: 10em;
      }

      #header .horizontal ul ul {
        padding-left: 0;
      }
      </style>
    
    <!--[if lt IE 7]>
    <style type="text/css" media="screen">
    /* I'd like to put this in the ie-menus.css but need to use a gsp tag to
     * generate the behaviour url value.
     */
    body {
      behavior: url('/_images/menu/csshover.htc');
      font-size: 100%;
    }
    </style>
    <link rel="stylesheet" href="/css/ie-menus.css" />
    <![endif]-->
    
    <script type="text/javascript" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/prototype.js"></script>

    <script type="text/javascript" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/scriptaculous.js"></script><script type="text/javascript" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/effects.js"></script>

    <script type="text/javascript" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/prototip.js"></script>


    
    
      <meta name="layout" content="cowguest">
    
    
    <script type="text/javascript" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/twitter.js"></script>

    <script type="text/javascript">

      var id = '2';
      var pathDir = 'wiki\/TrainingCourseJune2012\/track-2\/';
      var uploadLink = '';
    
</script>
    <meta name="google-site-verification" content="5l2GPDO4drzRBEHSskaHF5vrSALPVNkM8MyeK0Gz9wI">
    <script type="text/javascript" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/application.js"></script>

  <link rel="stylesheet" href="http://gate.ac.uk/gwt/gate.cow.gwt.NewPage/NewPage.css"></head>
  
  <body>
    <div id="topBar">
      <span id="topLogo">
        <a href="http://gate.ac.uk/"><img src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/logo-gate.png" alt="GATE" border="0" height="70" width="361"></a>
      </span>
      
      <!-- first row header links -->
      <div id="topLoginEtc">
        
          <form name="searchForm" method="GET" action="http://www.google.com/search" class="inlineForm">
            <label class="pageLink" for="as_q">Search:</label>
            <input type="text" name="as_q" maxlength="255">
            <input type="hidden" name="as_sitesearch" value="gate.ac.uk">
          </form>
        
        
        
          
            
              <a href="http://gate.ac.uk/g8/auth/login?targetUri=%2Fwiki%2FTrainingCourseJune2012%2Ftrack-2%2Fmodule-7-code.html">Log&nbsp;in</a>
            
          
        
        
        
        <span class="pageLink"><a href="http://gate.ac.uk/gatewiki/cow/doc/gatewiki.html">Help</a></span>


        <!-- page links -->
        <br>
        <span id="topPageSpecific">

  
    
  
  


  


  <span class="pageLink"><a href="http://gate.ac.uk/g8/page/print/2/wiki/TrainingCourseJune2012/track-2/module-7-code.html">Print</a></span>


</span>
      </div>

      <!-- second row header links -->
      <div id="topBreadcrumbs">
        
          
  
  
    <span class="pageLink"><a href="http://gate.ac.uk/">Home</a></span>
  

  〉
  
    <span class="pageLink"><a href="http://gate.ac.uk/wiki">wiki</a></span>
  

  〉
  
    <span class="pageLink"><a href="http://gate.ac.uk/wiki/TrainingCourseJune2012">TrainingCourseJune2012</a></span>
  

  〉
  
    <span class="pageLink"><a href="http://gate.ac.uk/wiki/TrainingCourseJune2012/track-2">track-2</a></span>
  

  〉
  
    module-7-code.html
  


        
      </div>
    </div>

    <!-- header menus -->
    <div id="header">
      
      <div class="horizontal menu">
        <ul>
        <li><b><a href="http://gate.ac.uk/family/">Products</a></b>
          <ul>
          <li><a href="http://gate.ac.uk/family/developer.html">GATE Developer</a></li>
          <li><a href="http://gate.ac.uk/family/embedded.html">GATE Embedded</a></li>
          <li><a href="http://gate.ac.uk/teamware">GATE Teamware</a></li>
          <li><a href="http://gate.ac.uk/family/process.html">The GATE Process</a></li>
          <li><a href="http://gatecloud.net/">GATE Cloud</a></li>
          <li><a href="http://gate.ac.uk/mimir/">GATE Mímir</a></li>
          <li><a href="http://gate.ac.uk/gatewiki/cow/">GATE Wiki</a></li>
          <li><a href="http://gate.ac.uk/family/training.html">Training/Certification</a></li>
          </ul>
        </li>
        <li><b><a href="http://gate.ac.uk/customisation/">Services</a></b>
          <ul>
          <li><a href="http://gate.ac.uk/biz/customers.html">Customer stories</a></li>
          <li><a href="http://gate.ac.uk/biz/usps.html">Why GATE?</a></li>
          <li><a href="http://gate.ac.uk/family/training.html">Training/Certification</a></li>
          </ul>
        </li>
        <li><b><a href="http://gate.ac.uk/support.html">Support</a></b>
          <ul>
          <li><a href="http://gate.ac.uk/mail/">Community-based</a></li>
          <li><a href="http://gate.ac.uk/customisation/">For business</a></li>
          </ul>
        </li>
        <li><a href="http://gate.ac.uk/download/">Download</a></li>
        <li><b><a href="http://gate.ac.uk/documentation.html">Documentation</a></b>
          <ul>
          <li><a href="http://gate.ac.uk/userguide/">User guide</a></li>
          <li><a href="http://gate.ac.uk/mail/">Mailing list</a></li>
          <li><b><a href="http://gate.ac.uk/wiki/">Wiki</a></b>
            <ul>
            <li><a href="http://gate.ac.uk/wiki/jape-repository/">JAPE tips</a></li>
            <li><a href="http://gate.ac.uk/wiki/code-repository/">Example code</a></li>
            <li><a href="http://gate.ac.uk/wiki/quick-start/">Beginners' quick-start guide</a></li>
            <li><a href="http://gate.ac.uk/wiki/groovy-recipes/">Groovy recipes</a></li>
            </ul>
          </li>
          <li><a href="http://gate.ac.uk/demos/">Demos</a></li>
          <li><a href="http://gate.ac.uk/books.html">Books</a></li>
          <li><a href="http://gate.ac.uk/gate/doc/plugins.html">Core plugins</a></li>
          <li><a href="http://gate.ac.uk/sale/gate-flyer/2009/gate-flyer-4-page.pdf">Brochure</a></li>
          <li><a href="http://gate.ac.uk/gate/doc/javadoc/index.html">Javadocs</a></li>
          <li><a href="http://gate.ac.uk/documentation.html">Docs summary</a>
          </li></ul>
        </li>
        <li><b><a href="http://gate.ac.uk/g8/contact">Contact</a></b>
          <ul>
          <li><a href="http://gate.ac.uk/people/">About the team</a></li>
          <li><a href="http://gate.ac.uk/g8/contact">Contact us</a></li>
          </ul>
        </li>
        <li><a href="http://gate.ac.uk/donate.html">Donate</a></li>
        </ul>
      </div>
    </div>

    <!-- sep, left/right bars, body and footer -->
    <div id="topSeparator"> </div>
    <div id="leftBar">
      <div class="vertical menu">



<ul>
<li><b><a class="cow-url" href="http://gate.ac.uk/overview.html">Overview</a></b>
  <ul>
  <li><a class="cow-url" href="http://gate.ac.uk/overview.html">Overview</a></li>
  <li><a class="cow-url" href="http://gate.ac.uk/2mins.html">2-Minute Guide</a></li>
  <li><a class="cow-url" href="http://gate.ac.uk/family/">The GATE Family</a></li>
  </ul></li>
<li><b><a class="cow-url" href="http://gate.ac.uk/science.html">For Scientists</a></b>
  <ul>
  <li><a class="cow-url" href="http://gate.ac.uk/projects.html">Research Projects</a></li>
  <li><a class="cow-url" href="http://gate.ac.uk/gate/doc/papers.html">Publications</a></li>
  </ul></li>
<li><a class="cow-url" href="http://gate.ac.uk/teaching.html">For Educators</a></li>
<li><b><a class="cow-url" href="http://gate.ac.uk/business.html">For Business</a></b>
  <ul>
  <li><a class="cow-url" href="http://gate.ac.uk/biz/customers.html">Customer stories</a></li>
  <li><a class="cow-url" href="http://gate.ac.uk/biz/usps.html">Why GATE?</a></li>
  </ul></li>
<li><b><a class="cow-url" href="http://gate.ac.uk/news.html">News</a></b>
  <ul>
  <li><a class="cow-url" href="http://gate.ac.uk/events.html">upcoming events</a></li>
  <li><a class="cow-url" href="http://twitter.com/GateAcUk">on Twitter</a></li>
  <li><a class="cow-url" href="http://www.linkedin.com/groups?home=&gid=2230077&trk=anet_ug_hm&goback=.anh_2230077">on LinkedIn</a></li>
  <li><a class="cow-url" href="http://www.facebook.com/pages/GATE/195959271064">on FaceBook</a></li>
  <li><a class="cow-url" href="http://gate.ac.uk/roadmap.html">release roadmap</a></li>
  <li><a class="cow-url" href="http://gate.ac.uk/blogs/">blogs</a></li>
  <li><a class="cow-url" href="http://gate.ac.uk/news.html">news archive</a></li>
  </ul></li>
</ul>
<!--
  - %(/ie, Introduction to Information Extraction)
-->
</div>
    </div>
    <div id="main" class="wideBorder">
      <div class="cowSpacer">&nbsp;</div>
      <h1 class="cow-title-heading">Code snippets for module 7</h1>
<a class="cow-section-anchor" name="section-1."></a><h1 class="cow-heading"><span class="cow-sec-number">1. </span>Basic Document stats PR</h1>
<a class="cow-section-anchor" name="section-1.1."></a><h2 class="cow-heading"><span class="cow-sec-number">1.1. </span>Code</h2>

<pre>package module7;

import gate.Resource;
import gate.creole.AbstractLanguageAnalyser;
import gate.creole.ExecutionException;
import gate.creole.ResourceInstantiationException;

public class DocStats extends AbstractLanguageAnalyser {

  @Override
  public void execute() throws ExecutionException {
    int tokens = document.getAnnotations().get("Token").size();
    document.getFeatures().put("token_count", tokens);
  }

  @Override
  public Resource init() throws ResourceInstantiationException {
    System.out.println(getClass().getName() + " is initialising.");
    return this;
  }
}
</pre>
<a class="cow-section-anchor" name="section-1.2."></a><h2 class="cow-heading"><span class="cow-sec-number">1.2. </span>creole.xml</h2>

<pre>&lt;CREOLE-DIRECTORY&gt;
  &lt;JAR&gt;module7.jar&lt;/JAR&gt;
  &lt;RESOURCE&gt;
    &lt;NAME&gt;Document Statistics&lt;/NAME&gt;
    &lt;CLASS&gt;module7.DocStats&lt;/CLASS&gt;
  &lt;/RESOURCE&gt;
&lt;/CREOLE-DIRECTORY&gt;
</pre>
<a class="cow-section-anchor" name="section-2."></a><h1 class="cow-heading"><span class="cow-sec-number">2. </span>Adding a parameter</h1>
<a class="cow-section-anchor" name="section-2.1."></a><h2 class="cow-heading"><span class="cow-sec-number">2.1. </span>Code</h2>

<pre>package module7;

import gate.Resource;
import gate.creole.AbstractLanguageAnalyser;
import gate.creole.ExecutionException;
import gate.creole.ResourceInstantiationException;

public class DocStats extends AbstractLanguageAnalyser {

  private String annotTypeToCount;

  public void setAnnotTypeToCount(String t) { annotTypeToCount = t; }
  public String getAnnotTypeToCount() { return annotTypeToCount; }

  private String inputASName;

  public void setInputASName(String n) { inputASName = n; }
  public String getInputASName() { return inputASName; }
  

  @Override
  public void execute() throws ExecutionException {
    int tokens = document.getAnnotations(inputASName).get(
           annotTypeToCount).size();
    document.getFeatures().put(annotTypeToCount + "_count", tokens);
  }

  @Override
  public Resource init() throws ResourceInstantiationException {
    System.out.println(getClass().getName() + " is initialising.");
    return this;
  }
}
</pre>
<a class="cow-section-anchor" name="section-2.2."></a><h2 class="cow-heading"><span class="cow-sec-number">2.2. </span>creole.xml</h2>

<pre>&lt;CREOLE-DIRECTORY&gt;
  &lt;JAR&gt;module7.jar&lt;/JAR&gt;
  &lt;RESOURCE&gt;
    &lt;NAME&gt;Document Statistics&lt;/NAME&gt;
    &lt;CLASS&gt;module7.DocStats&lt;/CLASS&gt;
    &lt;PARAMETER NAME="annotTypeToCount" RUNTIME="true"
        DEFAULT="Token"&gt;java.lang.String&lt;/PARAMETER&gt;
    &lt;PARAMETER NAME="inputASName" RUNTIME="true"
        OPTIONAL="true"&gt;java.lang.String&lt;/PARAMETER&gt;
  &lt;/RESOURCE&gt;
&lt;/CREOLE-DIRECTORY&gt;
</pre>
<a class="cow-section-anchor" name="section-3."></a><h1 class="cow-heading"><span class="cow-sec-number">3. </span>Confiuration using annotations</h1>
<a class="cow-section-anchor" name="section-3.1."></a><h2 class="cow-heading"><span class="cow-sec-number">3.1. </span>Code</h2>

<pre>package module7;

import gate.Resource;
import gate.creole.AbstractLanguageAnalyser;
import gate.creole.ExecutionException;
import gate.creole.ResourceInstantiationException;
import gate.creole.metadata.*;

@CreoleResource(name = "Document Statistics",
        comment = "Counts annotations in a document")
public class DocStats extends AbstractLanguageAnalyser {

  private String annotTypeToCount;

  @RunTime
  @CreoleParameter(defaultValue = "Token")
  public void setAnnotTypeToCount(String t) { annotTypeToCount = t; }
  public String getAnnotTypeToCount() { return annotTypeToCount; }

  private String inputASName;

  @Optional
  @RunTime
  @CreoleParameter(comment = "The annotation set to use for input")
  public void setInputASName(String n) { inputASName = n; }
  public String getInputASName() { return inputASName; }
  

  @Override
  public void execute() throws ExecutionException {
    int tokens = document.getAnnotations(inputASName).get(
           annotTypeToCount).size();
    document.getFeatures().put(annotTypeToCount + "_count", tokens);
  }

  @Override
  public Resource init() throws ResourceInstantiationException {
    System.out.println(getClass().getName() + " is initialising.");
    return this;
  }
}
</pre>
<a class="cow-section-anchor" name="section-3.2."></a><h2 class="cow-heading"><span class="cow-sec-number">3.2. </span>creole.xml</h2>

<pre>&lt;CREOLE-DIRECTORY&gt;
  &lt;JAR SCAN="true"&gt;module7.jar&lt;/JAR&gt;
&lt;/CREOLE-DIRECTORY&gt;
</pre>

<p>There are examples of <a class="cow-url" href="http://gate.ac.uk/wiki/TrainingCourseMay2011/track-2-extras/DocStats.java">doing more complex statistics</a> and <a class="cow-url" href="http://gate.ac.uk/wiki/TrainingCourseMay2011/track-2-extras/RegisterExplorer.java">exploring the <tt>CreoleRegister</tt></a> in the material from a previous training course.</p>    
      <div class="cowSpacer">&nbsp;</div>
    </div>
    <div id="rightBar"></div>
    <div id="footer">
      

      <!-- key partners -->
      <table align="center">
        <tbody><tr>
          <td rowspan="2" style="vertical-align:middle"><a href="http://www.shef.ac.uk/dcs/"><img src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/logo-usfd.png" alt="The University of Sheffield" height="81" width="191"></a></td>
          <td width="40" rowspan="2">&nbsp;</td>
          <td><b><span class="menu"><a href="http://gate.ac.uk/partners.html">Our partners:</a></span></b></td>
          <td width="10">&nbsp;</td>
          <td><a href="http://www.ontotext.com/"><img src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/logo-ontotext.png" alt="Ontotext" height="50" width="250"></a></td>
          <td width="10">&nbsp;</td>
          <td align="right"><a href="http://www.ir-facility.org/"><img src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/logo-irf.png" alt="IRF" height="58" width="138"></a></td>
        </tr>
	<tr>
        <td colspan="5">
        <table border="0"><tbody><tr>
          <td style="vertical-align:bottom; text-align:right;"><font size="-2">
            © The University of Sheffield, 1995-2011.<br>GATE is
            <a href="http://www.fsf.org/">free software</a>
            under <a href="http://www.gnu.org/licenses/">the GNU licences</a> and
            others.<br>All our products and services supplied <b>with no warranty</b>.
            <br>This website is licenced under the <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative 
            Commons Attribution-NonCommercial-ShareAlike Licence</a>.</font>
          </td>
          <td style="vertical-align:bottom;"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">
            <img alt="Creative Commons License" style="border-width: 0pt;" src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/cc-by-nc-sa.png"></a>
          </td>
        </tr>
      </tbody></table>
    

    <!-- GWT support -->
    <iframe id="__gwt_historyFrame" style="width:0;height:0;border:0">
    </iframe>

<!-- Google analytics -->
<script type="text/javascript">
<!--
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
-->
</script><script src="./GATE.ac.uk - wiki TrainingCourseJune2012 track-2 module-7-code_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
<!--
var pageTracker = _gat._getTracker("UA-4360259-3");
pageTracker._initData();
pageTracker._trackPageview();
-->
</script>
  
</td></tr></tbody></table></div><iframe src="javascript:''" id="gate.cow.gwt.NewPage" style="position: absolute; width: 0px; height: 0px; border: none;" tabindex="-1"></iframe><iframe src="javascript:''" id="gate.cow.gwt.Upload" style="position: absolute; width: 0px; height: 0px; border: none;" tabindex="-1"></iframe></body></html>